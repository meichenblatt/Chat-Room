ChatApp.controller("chatController",function($scope,$rootScope,messages,$timeout,$firebaseArray){void 0===$rootScope.loggedin&&($rootScope.loggedin=!1),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){var lat=position.coords.latitude,lng=position.coords.longitude,geocoder=new google.maps.Geocoder,latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&($rootScope.location=results[1].formatted_address)})}),messages.getAll().then(function(result){$scope.messages=result,$timeout(function(){$scope.$apply();var objDiv=document.getElementById("main-box");objDiv.scrollTop=objDiv.scrollHeight},0)}),$scope.login=function(){$rootScope.name=this.name,$rootScope.loggedin=!0},$scope.addMessage=function(){var d=new Date,obj={};obj.message=this.newMessage,obj.name=$rootScope.name,obj.time=d.getTime(),$scope.messages.$add(obj).then(function(newm){var objDiv=document.getElementById("main-box");objDiv.scrollTop=objDiv.scrollHeight},function(e){console.log(e)})},$scope.validate=function(inputID){document.getElementById(inputID).validationMessage?document.getElementById(inputID).style.borderColor="red":document.getElementById(inputID).style.borderColor="#32CD32"}});